{% extends "base.html" %}

{% block title %}
<title>CRIM | Advanced search</title>
{% endblock %}

{% block header %}
  <script type="text/javascript">
  $(document).ready(function ($) {
    $("#search-form").on({
      'submit': function(event) {
        $(':input[value="None"]', $("#search-form")).each(function(){
          $(this).attr('disabled', true);
        })
      }
    })
  });
  </script>
{% endblock %}

{% block wrap %}
<div class="row-fluid">
  <div class="span12">
    <div class="search-heading row-fluid">
      <h1 class="search-title page-title span8">Advanced search</h1>
    </div>
    <div class="row-fluid">
      <div class="span8 search-container content-container">
        <form id="search-form" action="/search" method="get">
          <input type="text" name="q" class="search-input">
          <!-- <button type="submit" class="btn btn-large">Search</button> -->
          <div class="accordion" id="search-accordion">
            <h2>Limit by:</h2>
<!--             {% include "search/blocks/book_block.html" %}
            {% include "search/blocks/composer_block.html" %}
            {% include "search/blocks/contributor_block.html" %}
            {% include "search/blocks/cadences_block.html" %}
            {% include "search/blocks/intervalpatt_block.html" %}
            {% include "search/blocks/prestype_block.html" %}
            {% include "search/blocks/texttone_block.html" %}
            {% include "search/blocks/musicalform_block.html" %}
            {% include "search/blocks/date_block.html" %} -->
          </div> <!-- .accordion -->
          <div class="search-buttons">
            <button id="search-submit" type="submit" class="btn btn-large btn-inverse">Search</button>
            <button type="reset" class="btn btn-large">Clear</button>
          </div>
        </form>
      </div><!--/span-->
      <div id="sidebar" class="span4">
        <h3>Advanced search help</h3>
        <div id="advanced-help">
        <p>
        Limits by <strong>composer</strong>, <strong>book</strong>, or <strong>date</strong> of publication should explain themselves. To learn more about the  <strong>controlled vocabulary</strong> and <strong>thesaurus</strong>, see the Editor’s Forum.
        </p>
<!--         <h4><a id="cadence" class="advanced-help-heading"><strong>Cadence</strong></a></h4>
        <p id="cadence-help-content" class="advanced-help-content">types expands to allow limits final tone of the cadence, or by cadence <em>types</em> (such as authentic, plagal, phrygian), by various <em>modifiers</em> (as when a cadence is evaded or inverted), and by <em>voice roles</em> (depending on which of the four voice parts takes the customary motion of the superius (or <em>cantizans</em>) or tenor (the <em>tenorizans</em>). Select the latter with the voice grids.
        </p>
        <h4>
          <a id="interval" class="advanced-help-heading"><strong>Interval patterns</strong></a>
        </h4>
        
        <p id="interval-help-content" class="advanced-help-content">trace motion between pairs of voices (parallel 6ths, parallel 3rds, or alternating sequences of 5ths and 3rds). You can further limit these according to  <strong>voice roles</strong> (use the radio buttons to select the upper and lower voice in each pair).</p>
        <h4>
          <a id="presentation" class="advanced-help-heading"><strong>Presentation types</strong></a>
        </h4>
        <p id="presentation-help-content" class="advanced-help-content">are limited with voice role grids (here you select the precise order of voices, for as many voices as appropriate). For the<strong>imitative types</strong>, you can further limit according to intervals of imitation (the @1, @4, and @5 are explained in the  <strong>Controlled Vocabulary</strong>). They always refer to the interval of the <em>latest</em> voice to enter. For the <strong>periodic entries</strong>
        , you can also limit by <strong>stretto fuga </strong>and <strong>invertible counterpoint </strong>(either with or without specification of  <strong>voice roles</strong>). But note: some combinations are musically <em>impossible</em>, and so will not return results.</p>
        <h4>
          <a id="text-tone" class="advanced-help-heading"><strong>Text-tone relationships</strong></a>
        </h4>
        <p id="text-tone-help-content" class="advanced-help-content">and <strong>Formal Patterns</strong> are explained in the Controlled Vocabulary. The repetition schemes can be tricky: they always refer <em>back</em> to
          the phrase from which they derive.</p>
        <h4>
          <a id="refine" class="advanced-help-heading"><strong>Refine</strong></a>
        </h4>
        <p id="refine-help-content" class="advanced-help-content">or revise your search two ways. <strong>Narrow</strong> the search according to the listing of facets provided at the right of the <strong>Results</strong>
          page. <strong>Broaden</strong> the search by returning to the <strong>Advanced Search</strong> page, then review and ‘uncheck’ various facets. Clear
          eliminates all limits. Use the voice grids to clear individual roles as needed.</p>
        <h4>
          <a id="combining" class="advanced-help-heading"><strong>Combining</strong></a>
        </h4>
        <p id="combining-help-content" class="advanced-help-content">the analytic facets is tricky. You <em>cannot</em>, for instance, reliably search for <strong>Cadences</strong> and <strong>Presentation Types</strong> at
          the same time. But you <em>can</em> combine some of the interval patterns.</p> -->
        </div>

        <style>
        .advanced-help-content  {
           display: none;
        }
        #advanced-help a {
           cursor: pointer;
        }
        </style>

        <script>
        $(function(){
           $('.advanced-help-heading').click(function(){
               var contentId = $(this).attr('id');
               $('#' + contentId + '-help-content').toggle(100);
            });
        });
        </script>

      </div><!--/span-->
    </div><!--/row-->
  </div><!--/span-->
</div><!--/row-->
{% include "search/searchjs.html" %}
{% endblock %}
